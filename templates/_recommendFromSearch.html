{% extends "base.html" %}

{% block head %}
<title>Search for YouTube Videos</title>
{% endblock %}

{% block body %}
<h1>Search for YouTube Videos</h1>

	<form id="search-form" action="https://www.googleapis.com/youtube/v3/search" method="GET">
		<label for="search-input">Enter a search term:</label>
		<input type="text" id="search-input" name="q" placeholder="Search term...">
		<input type="hidden" name="part" value="snippet">
		<input type="hidden" name="type" value="video">
		<input type="hidden" name="maxResults" value="1">
		<input type="hidden" name="key" value="[YOUR_YOUTUBE_API_KEY]">
		<button type="submit">Search</button>
	</form>

	<div id="player"></div>

	<script>
		// Attach an event listener to the form to handle the search submission
		document.getElementById("search-form").addEventListener("submit", function(event) {
			event.preventDefault();
			var searchTerm = document.getElementById("search-input").value;

            // Construct the YouTube API request URL with the search term
            var apiUrl = "https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&maxResults=1&key=AIzaSyC0PrPBKpvi_y_91vc_GWRl_0UgNbXQRAg&q=" + encodeURIComponent("how to use" + searchTerm);

            // Send a GET request to the YouTube API and process the response
            fetch(apiUrl)
                .then(function(response) {
                    return response.json();
                })
                .then(function(data) {
                    var videoId = data.items[0].id.videoId;
                    var playerDiv = document.getElementById("player");
                    playerDiv.innerHTML = '<iframe width="560" height="315" src="https://www.youtube.com/embed/' + videoId + '" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>';
                })
                .catch(function(error) {
                    console.error(error);
                });
		});
	</script>
{% endblock %}
